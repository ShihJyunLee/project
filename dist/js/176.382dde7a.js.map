{"version":3,"file":"js/176.382dde7a.js","mappings":"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","sources":["webpack://first-project/./src/views/UserShopping.vue","webpack://first-project/./src/views/UserShopping.vue?edf1"],"sourcesContent":["<!-- 購物車列表 -->\r\n<style scoped>\r\n  .line {\r\n    position: absolute;\r\n    top: 50%;\r\n    right: -15px; /* 根據需要調整線的位置 */\r\n    height: 2px;\r\n    width: 15px; /* 根據需要調整線的長度 */\r\n    background-color: #000; /* 根據需要調整線的顏色 */\r\n  }\r\n  .custom-bg {\r\n    background-color: #ffe6cc; /* 设置你想要的颜色 */\r\n  }\r\n</style>\r\n\r\n<template>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n  <div class=\"container mt-5\">\r\n    <div class=\"mt-5\"></div>\r\n    <nav aria-label=\"breadcrumb\" class=\"mb-3\">\r\n      <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item\"><router-link to=\"/\">首頁</router-link></li>\r\n        <li class=\"breadcrumb-item\"><router-link to=\"/user/cart\">商品列表</router-link></li>\r\n        <li class=\"breadcrumb-item\">購物車</li>\r\n      </ol>\r\n    </nav>\r\n\r\n    <div class=\"mt-5\">\r\n      <h2 class=\"text-center mb-4\">結帳流程</h2>\r\n      <div class=\"text-center text-nowrap\">\r\n        <div class=\"d-inline-block\">\r\n          <div class=\"border rounded rounded-4 p-2 me-3 position-relative bg-secondary text-white\">確認品項\r\n            <div class=\"line\"></div>\r\n          </div>\r\n        </div>\r\n        <div class=\"d-inline-block\">\r\n          <div class=\"border rounded rounded-4 p-2 me-3 position-relative\">填寫資料\r\n            <div class=\"line\"></div>\r\n          </div>\r\n        </div>\r\n        <div class=\"d-inline-block\">\r\n          <div class=\"border rounded rounded-4 p-2 me-3 position-relative\">前往付款\r\n            <div class=\"line\"></div>\r\n          </div>\r\n        </div>\r\n        <div class=\"d-inline-block\">\r\n          <div class=\"border rounded rounded-4 p-2 position-relative\">結帳成功</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row mt-5\">\r\n      <div class=\"col-md-6\">\r\n        <h2 class=\"text-center border p-3 mb-4 custom-bg\">購物車列表</h2>\r\n          <div v-for=\"item in cart.carts\" :key=\"item.id\" class=\"card mb-3\">\r\n            <div class=\"row g-0\">\r\n              <div class=\"col-md-4\">\r\n                <img :src=\"item.product.imageUrl\" class=\"img-fluid rounded-start\"  alt=\"Product Image\">\r\n              </div>\r\n              <div class=\"col-md-8 g-1\">\r\n                <div class=\"card-body\">\r\n                  <h5 class=\"card-title\">{{ item.product.title }}</h5>\r\n                  <p class=\"mt-2 text-secondary\"><small>產地: {{ item.product.category }}</small></p>\r\n                  <p class=\"card-text text-danger mt-5\" v-if=\"item.product.origin_price\">特價: NT${{ $filters.currency(item.product.price) }}</p>\r\n                  <p class=\"card-text mt-5\" v-else>原價: NT${{ $filters.currency(item.product.origin_price) }}</p>\r\n                  <div class=\"row\">\r\n                    <div class=\"col-md-6 col-8\">\r\n                      <div class=\"input-group input-group-sm\">\r\n                        <button class=\"btn btn-outline-secondary\" type=\"button\" @click=\"updateQuantity(item, 'decrement')\">-</button>\r\n                        <input type=\"tel\" class=\"form-control\" v-model.number=\"item.qty\" min=\"1\" @change=\"updateCart(item)\" :disabled=\"item.id === status.loadingItem\">\r\n                        <button class=\"btn btn-outline-secondary\" type=\"button\" @click=\"updateQuantity(item, 'increment')\">+</button>\r\n                        <div class=\"input-group-text\">/ {{ item.product.unit }}</div>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"col-md-6 col-4\">\r\n                      <p class=\"card-text text-end text-success\" v-if=\"coupon_state\">折扣價  NT${{ $filters.currency(item.final_total) }}</p>\r\n                      <p class=\"card-text text-end\" v-else>NT${{ $filters.currency(item.total) }}</p>\r\n                    </div>\r\n                  </div>\r\n                  <button type=\"button\" class=\"btn btn-outline-danger position-absolute top-0 end-0 border-0\" :disabled=\"status.loadingItem === item.id\" @click=\"removeCartItem(item.id)\">\r\n                    <i class=\"bi bi-x\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"needs-validation\">\r\n            <div class=\"row mb-4\">\r\n            <div class=\"col-md-6\">\r\n              <div class=\"input-group input-group-sm\">\r\n                <input type=\"text\" class=\"form-control\" v-model=\"coupon_code\" placeholder=\"請輸入優惠碼\">\r\n                <div class=\"input-group-append\">\r\n                  <button class=\"btn btn-outline-secondary bg-success text-white\" type=\"submit\" @click=\"addCouponCode\">套用優惠碼</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-md-6 mt-2 mt-md-0 text-end mt-3\">\r\n              <button type=\"button\" class=\"btn btn-outline-danger btn-block rounded-1\" data-bs-toggle=\"modal\" data-bs-target=\"#exampleModal\">清除所有購物車</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        </div>\r\n      <div class=\"col-md-6 d-flex flex-column mb-3\">\r\n        <div class=\"border border-black\">\r\n          <h2 class=\"text-center p-3 border-bottom\">訂單明細</h2>\r\n          <div class=\"row mt-5 ms-2\">\r\n            <div class=\"col-md-6 h5\"><strong>小計:</strong></div>\r\n            <div class=\"col-md-6 text-end pe-5\">\r\n              <div v-for=\"item in cart.carts\" :key=\"item.id\" class=\"border-bottom mb-4\">\r\n              {{ item.product.title }}\r\n              <span class=\"ps-4 text-success\" v-if=\"coupon_state\"><small>NT${{ item.final_total}}</small></span>\r\n              <span class=\"ps-4 text-secondary\" v-else><small>NT${{ item.total}}</small></span>\r\n              <span class=\"ps-4\">x{{ item.qty }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"row mt-5 ms-2 mb-3 border-top p-3\">\r\n            <div class=\"col-md-6 h4\"><strong>總計:</strong></div>\r\n            <div class=\"col-md-6 text-end pe-5\">\r\n              <div class=\"h4 text-success\" :id=\"total\" v-if=\"coupon_state\">{{ final_total }}</div>\r\n              <div class=\"text-success\" v-if=\"coupon_state\">已使用優惠卷</div>\r\n              <div class=\"h4\" :id=\"total\" v-else>{{ total }}</div>\r\n            </div>\r\n          </div>\r\n          <button class=\"btn btn-block text-white bg-dark text-center w-100 p-2 rounded-0\" type=\"button\" @click=\"material()\" :disabled=\"this.total === 0\">前往結帳</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n    <div class=\"modal fade\" id=\"exampleModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title text-danger\" id=\"exampleModalLabel\">確認刪除所有購物車品項</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\" @click=\"removeAllCart()\">確定</button>\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">關閉</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      status: {\r\n        loadingItem: '' // 對應品項 id\r\n      },\r\n      cart: {}, // 儲存購物車資訊\r\n      coupon_code: '', // 優惠卷號碼\r\n      coupon_state: '', // 儲存優惠卷狀態\r\n      total: '', // 儲存金額\r\n      final_total: ''// 儲存金額\r\n    }\r\n  },\r\n  methods: {\r\n    getCart () { // 取得購物車資訊\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.isLoading = true\r\n      this.$http.get(url).then((response) => {\r\n        this.cart = response.data.data\r\n        this.isLoading = false\r\n        this.final_total = response.data.data.final_total\r\n        this.total = response.data.data.total\r\n        console.log(this.cart)\r\n      })\r\n    },\r\n    updateQuantity (item, action) { // 控制購物車數量\r\n      if (action === 'increment') {\r\n        item.qty += 1\r\n      } else if (action === 'decrement' && item.qty > 1) {\r\n        item.qty -= 1\r\n      }\r\n      this.updateCart(item)\r\n    },\r\n    updateCart (item) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\r\n      this.isLoading = true\r\n      this.status.loadingItem = item.id // 當點擊時，該id會存到loadingItem，同時觸發v-bind(:disabled)，當loadingItem跟item.id同樣時會鎖起按鈕\r\n      const cart = { // 儲存商品id跟數量\r\n        product_id: item.product_id,\r\n        qty: item.qty\r\n      }\r\n      this.$http.put(url, { data: cart }).then((res) => {\r\n        this.status.loadingItem = '' // 更新完產品後把值清空\r\n        this.getCart() // 重新取得\r\n      })\r\n    },\r\n    addCouponCode () { // 新增優惠卷\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`\r\n      const coupon = { // 儲存優惠卷號碼\r\n        code: this.coupon_code\r\n      }\r\n      this.$http.post(url, { data: coupon }).then((res) => { // 傳遞給後端\r\n        this.coupon_state = res.data.success // 儲存優惠卷狀態\r\n        if (this.coupon_state === true) { // 判斷優惠卷是否成功\r\n          this.$httpMessageState(res, '套用優惠卷')\r\n        } else {\r\n          this.$httpMessageState(res, '套用優惠卷')\r\n        }\r\n        this.getCart()\r\n      })\r\n    },\r\n    removeCartItem (id) { // 刪除購物車\r\n      this.status.loadingItem = id // 當id一樣時鎖起刪除按鈕\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      this.isLoading = true\r\n      this.$http.delete(url).then((response) => {\r\n        this.$httpMessageState(response, '移除購物車品項') // 成功時彈出視窗\r\n        this.status.loadingItem = '' // 清除暫存的id\r\n        this.getCart() // 重新整理\r\n        this.isLoading = false\r\n      })\r\n    },\r\n    removeAllCart () { // 刪除全部購物車\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/carts`\r\n      this.isLoading = true\r\n      this.$http.delete(url)\r\n        .then((response) => {\r\n          this.isLoading = false\r\n          this.$httpMessageState(response, '移除購物車品項') // 成功時彈出視窗\r\n          this.getCart() // 重新整理\r\n        })\r\n    },\r\n    material () {\r\n      this.$router.push('material')\r\n    }\r\n  },\r\n  created () {\r\n    this.getCart()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./UserShopping.vue?vue&type=template&id=d65e68ba&scoped=true\"\nimport script from \"./UserShopping.vue?vue&type=script&lang=js\"\nexport * from \"./UserShopping.vue?vue&type=script&lang=js\"\n\nimport \"./UserShopping.vue?vue&type=style&index=0&id=d65e68ba&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d65e68ba\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_32","type","id","tabindex","_createVNode","_component_Loading","active","$data","isLoading","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_component_router_link","to","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_createElementBlock","_Fragment","_renderList","cart","carts","item","key","_hoisted_12","_hoisted_13","src","product","imageUrl","alt","_hoisted_15","_hoisted_16","_hoisted_17","_toDisplayString","title","_hoisted_18","category","origin_price","_hoisted_19","_ctx","$filters","currency","price","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","onClick","$event","$options","updateQuantity","_hoisted_24","qty","min","onChange","updateCart","disabled","status","loadingItem","_hoisted_26","_hoisted_27","unit","_hoisted_28","coupon_state","_hoisted_29","final_total","_hoisted_30","total","removeCartItem","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","coupon_code","placeholder","_hoisted_38","_cache","args","addCouponCode","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","material","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","removeAllCart","_hoisted_61","data","methods","getCart","url","this","$http","get","then","response","console","log","action","product_id","put","res","coupon","code","post","success","$httpMessageState","delete","$router","push","created","__exports__","render"],"sourceRoot":""}